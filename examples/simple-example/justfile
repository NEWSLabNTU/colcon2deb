# Test workspace build automation

# Project root (two levels up)
project_root := `cd ../.. && pwd`

# Show available recipes
default:
    @just --list

# Build Debian packages
build:
    #!/usr/bin/env bash
    set -eo pipefail
    echo "Building ${pkg_count} packages..."

    # Use project venv colcon2deb
    {{project_root}}/.venv/bin/colcon2deb --workspace source --config config.yaml

# Clean build artifacts
clean:
    rm -rf build/

# List packages in workspace
list:
    @find source/src -name "package.xml" -exec dirname {} \; | xargs -n1 basename
